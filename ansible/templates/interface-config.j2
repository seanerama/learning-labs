!
! Interface Configuration Template
! Generated by Ansible
! Device: {{ inventory_hostname }}
! Date: {{ ansible_date_time.iso8601 }}
!

{% for interface in interfaces %}
!
interface {{ interface.name }}
 description {{ interface.description | default('Managed by Ansible') }}
{% if interface.ip is defined %}
 ip address {{ interface.ip }} {{ interface.mask }}
{% endif %}
{% if interface.vlan is defined %}
 switchport access vlan {{ interface.vlan }}
 switchport mode access
{% endif %}
{% if interface.trunk is defined and interface.trunk %}
 switchport trunk encapsulation dot1q
 switchport mode trunk
{% if interface.allowed_vlans is defined %}
 switchport trunk allowed vlan {{ interface.allowed_vlans }}
{% endif %}
{% if interface.native_vlan is defined %}
 switchport trunk native vlan {{ interface.native_vlan }}
{% endif %}
{% endif %}
{% if interface.speed is defined %}
 speed {{ interface.speed }}
{% endif %}
{% if interface.duplex is defined %}
 duplex {{ interface.duplex }}
{% endif %}
{% if interface.enabled | default(true) %}
 no shutdown
{% else %}
 shutdown
{% endif %}
!
{% endfor %}
